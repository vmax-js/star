(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31ceb410"],{"0413":function(e,r,t){"use strict";t("9c5c")},"93a2":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"register"},[t("a-form",{staticClass:"registerForm",attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",e._b({attrs:{label:"用户名"}},"a-form-item",e.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{type:"string",message:"用户名由字母数组组成"},{required:!0,message:"请输入用户名！"}]}],expression:"[\n        'username',\n        {\n          rules: [\n            {\n              type: 'string',\n              message: '用户名由字母数组组成',\n            },\n            {\n              required: true,\n              message: '请输入用户名！',\n            },\n          ],\n        },\n      ]"}]})],1),t("a-form-item",e._b({attrs:{label:"角色"}},"a-form-item",e.formItemLayout,!1),[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["role",{rules:[{required:!0,message:"请选择角色!"}]}],expression:"[\n        'role',\n        { rules: [{ required: true, message: '请选择角色!' }] },\n\n      ]"}],attrs:{placeholder:"请选择角色"}},[t("a-select-option",{attrs:{value:"customer"}},[e._v("普通用户")]),t("a-select-option",{attrs:{value:"admin"}},[e._v("管理员")])],1)],1),t("a-form-item",e._b({attrs:{label:"邮箱"}},"a-form-item",e.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{type:"email",message:"请输入正确的邮箱格式！"},{required:!0,message:"请输入邮箱！"}]}],expression:"[\n        'email',\n        {\n          rules: [\n            {\n              type: 'email',\n              message: '请输入正确的邮箱格式！',\n            },\n            {\n              required: true,\n              message: '请输入邮箱！',\n            },\n          ],\n        },\n      ]"}]})],1),t("a-form-item",e._b({attrs:{label:"密码","has-feedback":""}},"a-form-item",e.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码!"},{validator:e.validateToNextPassword}]}],expression:"[\n        'password',\n        {\n          rules: [\n            {\n              required: true,\n              message: '请输入密码!',\n            },\n            {\n              validator: validateToNextPassword,\n            },\n          ],\n        },\n      ]"}],attrs:{type:"password"}})],1),t("a-form-item",e._b({attrs:{label:"确认密码","has-feedback":""}},"a-form-item",e.formItemLayout,!1),[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirm",{rules:[{required:!0,message:"请确认密码!"},{validator:e.compareToFirstPassword}]}],expression:"[\n        'confirm',\n        {\n          rules: [\n            {\n              required: true,\n              message: '请确认密码!',\n            },\n            {\n              validator: compareToFirstPassword,\n            },\n          ],\n        },\n      ]"}],attrs:{type:"password"},on:{blur:e.handleConfirmBlur}})],1),t("a-form-item",e._b({attrs:{label:"验证码"}},"a-form-item",e.formItemLayout,!1),[t("a-row",{attrs:{gutter:8}},[t("a-col",{attrs:{span:12}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{rules:[{required:!0,message:"请输入验证码！"}]}],expression:"[\n            'code',\n            { rules: [{ required: true, message: '请输入验证码！' }] },\n          ]"}]})],1),t("a-col",{attrs:{span:12}},[t("a-button",{class:{disabled:!this.canClick},on:{click:e.countDown}},[e._v(" "+e._s(e.content))])],1)],1)],1),t("a-form-item",e._b({},"a-form-item",e.tailFormItemLayout,!1),[t("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["agreement",{valuePropName:"checked"}],expression:"['agreement', { valuePropName: 'checked' }]"}]},[e._v(" I have read the "),t("a",{attrs:{href:""}},[e._v("agreement")])])],1),t("a-form-item",e._b({},"a-form-item",e.tailFormItemLayout,!1),[t("a-button",{staticStyle:{"margin-right":"10px","margin-bottom":"30px"},attrs:{type:"primary","html-type":"submit"}},[e._v("注册")]),t("router-link",{attrs:{to:"/login"}},[t("a-button",{staticStyle:{"margin-bottom":"30px"},attrs:{type:"primary"}},[e._v("去登录")])],1)],1)],1)],1)},o=[],s=t("c24f"),n={data:function(){return{content:"获取验证码",totalTime:3,canClick:!0,registerForm:{email:"",password:"",code:"",username:"",role:""},confirmDirty:!1,autoCompleteResult:[],formItemLayout:{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},tailFormItemLayout:{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}}}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"register"})},methods:{countDown:function(){var e=this,r=this.form.getFieldValue("email");if(!r)return this.$message.error("邮箱为空");if(!this.canClick)return!1;this.canClick=!1,this.content="".concat(this.totalTime,"s后重新发送"),s["a"].getCode({email:r}).then((function(e){"success"===e.status&&console.log("验证码已发送")})).catch((function(r){e.$message.error(r)}));var t=setInterval((function(){e.totalTime-=1,e.content="".concat(e.totalTime,"s重新发送"),e.totalTime<0&&(clearInterval(t),e.content="重新发送验证码",e.totalTime=3,e.canClick=!0)}),1e3);return!0},handleSubmit:function(e){var r=this;e.preventDefault(),this.form.validateFieldsAndScroll((function(e,t){e||(r.registerForm.email=r.form.getFieldValue("email"),r.registerForm.password=r.form.getFieldValue("password"),r.registerForm.code=r.form.getFieldValue("code"),r.registerForm.username=r.form.getFieldValue("username"),r.registerForm.role=r.form.getFieldValue("role"),s["a"].register(r.registerForm).then((function(e){console.log("注册结果",e),r.$message.error(e)})).catch((function(e){r.$message.error(e)})),console.log("Received values of form: ",t))}))},handleConfirmBlur:function(e){var r=e.target.value;this.confirmDirty=this.confirmDirty||!!r},compareToFirstPassword:function(e,r,t){var a=this.form;r&&r!==a.getFieldValue("password")?t("密码不一致！"):t()},validateToNextPassword:function(e,r,t){var a=this.form;r&&this.confirmDirty&&a.validateFields(["confirm"],{force:!0}),t()}}},i=n,m=(t("0413"),t("2877")),l=Object(m["a"])(i,a,o,!1,null,"8bebaeb4",null);r["default"]=l.exports},"9c5c":function(e,r,t){}}]);
//# sourceMappingURL=chunk-31ceb410.0a897c5c.js.map